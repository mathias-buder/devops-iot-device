cmake_minimum_required (VERSION 3.2)
#project (MainApplication)

set(MAIN_APPL_DIR ../../060_Software_Construction/MainApplication)
set(ACSIM_DIR ../ACSim)

add_subdirectory(${MAIN_APPL_DIR}/FOUNDATION FOUNDATION)

#clean VLE_SRCS Variable
set(VLE_SRCS "")

add_subdirectory(${MAIN_APPL_DIR}/CVD CVD)
add_subdirectory(${MAIN_APPL_DIR}/DCAP DCAP)
add_subdirectory(${MAIN_APPL_DIR}/VIDEO VIDEO)
add_subdirectory(${MAIN_APPL_DIR}/UTIL UTIL)
add_subdirectory(${MAIN_APPL_DIR}/TRKSEL TRKSEL)
add_subdirectory(${MAIN_APPL_DIR}/TRACK TRACK)
add_subdirectory(${MAIN_APPL_DIR}/IOI IOI)
add_subdirectory(${MAIN_APPL_DIR}/SITU SITU)
# add_subdirectory(${MAIN_APPL_DIR}/ASM_ACC ASM_ACC)
add_subdirectory(${MAIN_APPL_DIR}/ASM_AEB ASM_AEB)
add_subdirectory(${MAIN_APPL_DIR}/CM CM)
add_subdirectory(${MAIN_APPL_DIR}/WAM_AEB WAM_AEB)
# add_subdirectory(${MAIN_APPL_DIR}/SAC_ACC SAC_ACC)
add_subdirectory(${MAIN_APPL_DIR}/SAC_AEB SAC_AEB)
add_subdirectory(${MAIN_APPL_DIR}/RCP RCP)
add_subdirectory(${MAIN_APPL_DIR}/MODEMAN MODEMAN)
add_subdirectory(${MAIN_APPL_DIR}/LF LF)
add_subdirectory(${MAIN_APPL_DIR}/LA LA)
add_subdirectory(${MAIN_APPL_DIR}/ENVID ENVID)
#add_subdirectory(${MAIN_APPL_DIR}/CW CW)
add_subdirectory(${MAIN_APPL_DIR}/FD FD)
add_subdirectory(${MAIN_APPL_DIR}/TF TF)
add_subdirectory(${MAIN_APPL_DIR}/OF OF)
add_subdirectory(${MAIN_APPL_DIR}/OSL OSL)
add_subdirectory(${MAIN_APPL_DIR}/OSL_ACC OSL_ACC)
add_subdirectory(${MAIN_APPL_DIR}/OSL_AEB OSL_AEB)
add_subdirectory(${MAIN_APPL_DIR}/RADAR_UTILITIES RADAR_UTILITIES)

add_library(MainApplication STATIC
    ${GOGETA_SIMULATOR_SRCS}

    ${VLE_SRCS}

    ${ACSIM_DIR}/Config/Common/EcuControl/HelpFunctions/CVD/cvd_help_functions.c
    ${ACSIM_DIR}/Config/Common/EcuControl/CompatibFunctions/compatib_custom.c
    ${ACSIM_DIR}/Config/Common/EcuControl/CompatibFunctions/compatib_gen.c
    )

# copy from ACSim init.mk
target_compile_definitions(MainApplication
    PRIVATE
        EUA
        STRICT
        DIAG_SUBSYSTEM
        CW_SUBSYSTEM
        TRACK_SUBSYSTEM
        FUSION_SUBSYSTEM
        LF_SUBSYSTEM
        TRKSEL_SUBSYSTEM
        SITU_SUBSYSTEM
        VIDEO_SUBSYSTEM
        MMI_SUBSYSTEM
        OSDIABPPC
        _DIABDATA_C_MPC5554_
        APPTYPESH="<sample.h>"
        TS_ARCH_FAMILY
        OS_CPU=OS_XPC56XXL
        TS_ARCH_DERIVATE
        OS_PA_VLE=1
        OS_MEMMAP=0
        __PPC_VLE__
        APPS_CODE
        OS_ARCH=OS_PA
        OS_KERNEL_TYPE=OS_FUNCTION_CALL
        OS_USE_TRACE=0
        OS_TOOL=OS_diab
    PUBLIC
        EGA
        simulator
        ACSim
        Gogeta_simulator
    )

target_include_directories(MainApplication
    PRIVATE
        ${ACSIM_DIR}/Config/Common
        ${ACSIM_DIR}/Config/Common/EcuControl/CompatibFunctions

        ${MAIN_APPL_DIR}/ENVID
        ${MAIN_APPL_DIR}/CVD

        ${MAIN_APPL_DIR}/UTIL
        ${MAIN_APPL_DIR}/OF/Core
        ${MAIN_APPL_DIR}/FD/Core
        ${MAIN_APPL_DIR}/OPSYS
        
    PUBLIC
        ${ACSIM_DIR}/Config/Common
        ${ACSIM_DIR}/Config/Common/CanProcessing
        ${ACSIM_DIR}/Config/Common/EcuControl
        ${ACSIM_DIR}/Config/Common/EcuControl/CompatibFunctions
        ${MAIN_APPL_DIR}
        ${MAIN_APPL_DIR}/FOUNDATION
        ${MAIN_APPL_DIR}/VIDEO
        ${MAIN_APPL_DIR}/TRACK
        ${MAIN_APPL_DIR}/TRKSEL
        ${MAIN_APPL_DIR}/TRKSEL/Core/YawRateStatusHandling
        ${MAIN_APPL_DIR}/LONGREG
        ${MAIN_APPL_DIR}/SIGPROC
        ${MAIN_APPL_DIR}/DATAACQ
        ${MAIN_APPL_DIR}/IOI/IOI_AEB
        ${MAIN_APPL_DIR}/MCAL/Core
        ${MAIN_APPL_DIR}/MCAL/Config
        ${MAIN_APPL_DIR}/SYSHEALTH
        ${MAIN_APPL_DIR}/RCP
        ${MAIN_APPL_DIR}/CW
        ${MAIN_APPL_DIR}/CM
        ${MAIN_APPL_DIR}/COMMS
        ${MAIN_APPL_DIR}/MODEMAN
    )



